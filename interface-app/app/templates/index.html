<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MQTT Communication</title>
    <!-- SocketIO CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.min.js"></script>
</head>
<body>
    <h1>MQTT Communication with Flask and SocketIO</h1>

    <form id="subscribeForm">
        <h3>Subscribe to Topic</h3>
        <label for="subscribeTopic">Topic:</label>
        <input type="text" id="subscribeTopic" name="subscribeTopic" placeholder="Enter topic">
        <button type="button" onclick="subscribe()">Subscribe</button>
    </form>

    <hr>

    <form id="publishForm">
        <h3>Publish Message</h3>
        <label for="publishTopic">Topic:</label>
        <input type="text" id="publishTopic" name="publishTopic" placeholder="Enter topic">
        <label for="message">Message:</label>
        <input type="text" id="message" name="message" placeholder="Enter message">
        <button type="button" onclick="publish()">Publish</button>
    </form>

    <!-- SocketIO connection -->
    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        // Subscribe to a topic
        function subscribe() {
            var topic = document.getElementById('subscribeTopic').value;
            socket.emit('subscribe', { 'topic': topic });
            return false;
        }

        // Publish a message
        function publish() {
            var topic = document.getElementById('publishTopic').value;
            var message = document.getElementById('message').value;
            socket.emit('publish', { 'topic': topic, 'message': message });
            return false;
        }
    </script>
</body>
</html>
